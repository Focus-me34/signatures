<div class="container-contracts">
  <div class="side-actions">
    <% if user_signed_in? %>
      <% if current_user.role == "Individual" %>
          <div class="individual-buttons">
            <%= link_to "Signed", signed_path, class: "nav_button" %>
            <%= link_to "Unsigned", unsigned_path, class: "nav_button" %>
            <%= link_to "Logout", destroy_user_session_path, method: :delete, class: "nav_button" %>
        </div>
      <% else %>
          <div class="individual-buttons">
            <%= link_to "Signed", signed_path, class: "nav_button" %>
            <%= link_to "Unsigned", unsigned_path, class: "nav_button" %>
            <%= link_to "New Contract", new_contract_path, class: "nav_button" %>
            <%= link_to "Logout", destroy_user_session_path, method: :delete, class: "nav_button" %>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="content-window">

     <%= form_tag unsigned_path, method: :get do %>
        <%= text_field_tag :query, params[:query], class: "search-bar", placeholder: "Search a contract by name or description" %>
        <%= submit_tag "Search", class: "d-none" %>
      <% end %>

    <h3>Unsigned contracts</h3>
    <div class="all-contracts">
      <% @contracts.where(fully_signed_at: nil).each do |contract| %>
        <div class="contract">
          <p><span class="show-keywords">Contract name:</span> <%= link_to contract.name, contract_path(contract) %></p>
          <p class="test-test"><span class="show-keywords">Description:</span> <%= contract.description %></p>
          <% if current_user.role == "Individual" && current_user.individual == contract.individual && contract.fully_signed_at.nil? %>
            <%= link_to "SIGN ME NOW", contract_path(contract), class: "sign-btn" %>
          <% end %>
          <%# <p>Contract has attachment: contract.document.attached?</p> %>
        </div>
      <% end %>
    </div>
</div>

<%# <div data-controller="update-notifs">
  <span style="color: white" class="notif count" data-remote="true" data-insert-in-list-target="notif-number"><%= Contract.all.where(individual_id: current_user.individual.id).where(status: "unopened").count + Contract.all.where(individual_id: current_user.individual.id).where(status: "opened").count %>
<%# </div> %>
